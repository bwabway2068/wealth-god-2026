<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¤ªä¹™æ•‘è‹¦å¤©å°Šï½œè§£æ¥­æ¶ˆç½ç¥ˆç¦æ³•æœƒ</title>
    <!-- 1. è¼‰å…¥ Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'dao-black': '#050a08',
                        'dao-dark': '#0a1410',
                        'dao-gold': '#d4af37',
                        'dao-gold-light': '#fcf6ba',
                        'dao-green': '#064e3b',
                        'dao-jade': '#10b981',
                        stone: { 800: '#1c1917', 900: '#0c0a09', 950: '#050a08' },
                    },
                    fontFamily: {
                        'serif': ['"Noto Serif TC"', 'serif'],
                        'sans': ['"Noto Sans TC"', 'sans-serif'],
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.8s ease-out',
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    },
                    keyframes: {
                        fadeIn: {
                            '0%': { opacity: '0', transform: 'translateY(10px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        }
                    }
                }
            }
        }
    </script>
    <!-- 2. è¼‰å…¥ React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- 3. è¼‰å…¥ Babel -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- 4. Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;700&family=Noto+Sans+TC:wght@300;400;500&display=swap" rel="stylesheet">
    
    <style>
        body { background-color: #050a08; color: #e5e7eb; font-family: 'Noto Sans TC', sans-serif; }
        .serif-font { font-family: 'Noto Serif TC', serif; }
        
        /* æ²å‹•æ¢æ¨£å¼ */
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: rgba(6, 78, 59, 0.1); border-radius: 8px; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: rgba(212, 175, 55, 0.5); border-radius: 8px; }
        .custom-scrollbar::-webkit-scrollbar-thumb:hover { background: rgba(212, 175, 55, 0.8); }
        
        /* æ—¥æœŸè¼¸å…¥æ¡†æ·±è‰²æ¨¡å¼èˆ‡ç™½è‰²åœ–ç¤º */
        input[type="date"] { 
            color-scheme: dark; 
        }
        input[type="date"]::-webkit-calendar-picker-indicator { 
            cursor: pointer; 
            opacity: 1; 
            /* filter: invert(1); <--- ç§»é™¤é€™è¡Œï¼Œå› ç‚º color-scheme: dark å·²ç¶“æœƒæä¾›ç™½è‰²åœ–ç¤º */
        }
        
        /* é‡‘è‰²æ–‡å­—æ¼¸å±¤ */
        .gold-text {
            background: linear-gradient(to bottom, #fcf6ba, #d4af37, #aa771c);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- SVG åœ–ç¤ºçµ„ä»¶ ---
        const Icons = {
            Lotus: ({size=24, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"><path d="M12 3c-4 4-6 9-6 13 0 2.5 2 5 6 5s6-2.5 6-5c0-4-2-9-6-13z"/><path d="M12 21a9 9 0 0 1-9-9c0-3 2-6 5-8"/><path d="M12 21a9 9 0 0 0 9-9c0-3-2-6-5-8"/><path d="M12 16a4 4 0 0 0 0-8 4 4 0 0 0 0 8z"/></svg>,
            CheckCircle: ({size=24, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>,
            ArrowRight: ({size=24, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12h14"/><path d="m12 5 7 7-7 7"/></svg>,
            CalendarDays: ({size=24, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/><path d="M8 14h.01"/><path d="M12 14h.01"/><path d="M16 14h.01"/><path d="M8 18h.01"/><path d="M12 18h.01"/><path d="M16 18h.01"/></svg>,
            ScrollText: ({size=24, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M15 12h-5"/><path d="M15 8h-5"/><path d="M19 17V5a2 2 0 0 0-2-2H4"/><path d="M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3"/></svg>,
            Users: ({size=24, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>,
            Leaf: ({size=24, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.77 10-10 10Z"/><path d="M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12"/></svg>,
            ExternalLink: ({size=24, className}) => <svg width={size} height={size} className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
        };

        // --- 2026 ä¸™åˆå¹´ æ—¥ç¨‹è¡¨ ---
        const baseSchedule = [
          { month: 'æ­£æœˆ', d1: '', d15: '2026-03-03' },
          { month: 'äºŒæœˆ', d1: '2026-03-19', d15: '2026-04-02' },
          { month: 'ä¸‰æœˆ', d1: '2026-04-17', d15: '2026-05-01' },
          { month: 'å››æœˆ', d1: '2026-05-17', d15: '2026-05-31' },
          { month: 'äº”æœˆ', d1: '2026-06-15', d15: '2026-06-29' },
          { month: 'å…­æœˆ', d1: '2026-07-15', d15: '2026-07-29' },
          { month: 'ä¸ƒæœˆ', d1: '2026-08-13', d15: '2026-08-27' },
          { month: 'å…«æœˆ', d1: '2026-09-11', d15: '2026-09-25' },
          { month: 'ä¹æœˆ', d1: '2026-10-10', d15: '2026-10-24' }, 
          { month: 'åæœˆ', d1: '2026-11-09', d15: '2026-11-23' },
          { month: 'åä¸€æœˆ', d1: '2026-12-09', d15: '2026-12-23' },
          { month: 'åäºŒæœˆ', d1: '2027-01-08', d15: '2027-01-22' },
        ];

        const lunarMonthMap = { 'æ­£æœˆ': 1, 'äºŒæœˆ': 2, 'ä¸‰æœˆ': 3, 'å››æœˆ': 4, 'äº”æœˆ': 5, 'å…­æœˆ': 6, 'ä¸ƒæœˆ': 7, 'å…«æœˆ': 8, 'ä¹æœˆ': 9, 'åæœˆ': 10, 'åä¸€æœˆ': 11, 'åäºŒæœˆ': 12 };

        // è‡ªå‹•æ¨ç®—è¾²æ›†æ˜¯å¦éœ€é †å»¶ (å«æˆŠæ—¥ã€å—æ­»æ—¥ç­‰)
        const getAdjustedDate = (dateString, lunarMonthName) => {
          if (!dateString) return null;
          // ç‰¹æ®Šæ—¥æœŸè¦å‰‡
          const specialDateRules = {
            '2026-03-19': { forceDelay: true, reason: 'å—æ­»' },
            '2026-05-01': { forceDelay: true, reason: 'å—æ­»' },
            '2026-05-31': { forceDelay: true, reason: 'å—æ­»' },
            '2026-06-29': { forceNoDelay: true },
            '2026-07-29': { forceNoDelay: true },
            '2026-08-13': { forceNoDelay: true },
            '2026-09-11': { forceDelay: true, reason: 'æˆŠæ—¥' }, 
            '2026-11-09': { forceNoDelay: true },
            '2027-01-22': { forceDelay: true, reason: 'ç´…ç´—' }, 
          };

          let date = new Date(dateString);
          let isDelayed = false;
          let delayReason = '';

          if (specialDateRules[dateString]) {
            const rule = specialDateRules[dateString];
            if (rule.forceNoDelay) {
               // ä¸éœ€é †å»¶
            } else if (rule.forceDelay) {
              date.setDate(date.getDate() + 1);
              isDelayed = true;
              delayReason = rule.reason;
            }
          } else {
             const lunarMonth = lunarMonthMap[lunarMonthName] || 1; 
             const baseDate = new Date('2026-01-01');
             const timeDiff = date.getTime() - baseDate.getTime();
             const dayDiff = Math.floor(timeDiff / (1000 * 3600 * 24)); 
             let stemIndex = (5 + dayDiff) % 10;
             // ç°¡å–®åˆ¤æ–·æˆŠæ—¥
             if (stemIndex === 4) { isDelayed = true; delayReason = 'æˆŠæ—¥'; date.setDate(date.getDate() + 1); }
          }
          
          const y = date.getFullYear();
          const m = String(date.getMonth() + 1).padStart(2, '0');
          const d = String(date.getDate()).padStart(2, '0');
          return { original: dateString, actual: `${y}-${m}-${d}`, isDelayed, delayReason };
        };

        const planOptions = [ "ã€å¤ªä¹™æ•‘è‹¦å¤©å°Šã€‘è§£æ¥­æ¶ˆç½æ³•æœƒ - NT$ 850" ];

        function App() {
          const [schedule, setSchedule] = useState([]);
          const [isSubmitting, setIsSubmitting] = useState(false);
          const [isSubmitted, setIsSubmitted] = useState(false);
          
          // æˆªæ­¢æ—¥æœŸè¨­å®š (æ³•æœƒå‰5å¤©æˆªæ­¢)
          const cutoffDate = new Date();
          cutoffDate.setDate(cutoffDate.getDate() + 5); 
          const cutoffDateString = `${cutoffDate.getFullYear()}-${String(cutoffDate.getMonth() + 1).padStart(2, '0')}-${String(cutoffDate.getDate()).padStart(2, '0')}`;

          const [formData, setFormData] = useState({
            name: '', phone: '', address: '', 
            calendarType: 'è¾²æ›†', birthDate: '', birthTime: 'å‰æ™‚',
            selectedDates: [],
            sessionType: planOptions[0],
            participantsCount: 1,
            additionalInfo: ''
          });

          useEffect(() => {
            const processedSchedule = baseSchedule.map(item => ({
              month: item.month,
              d1: getAdjustedDate(item.d1, item.month),
              d15: getAdjustedDate(item.d15, item.month)
            }));
            setSchedule(processedSchedule);
          }, []);

          const handleInputChange = (e) => {
            const { name, value } = e.target;
            setFormData(prev => ({ 
              ...prev, 
              [name]: name === 'participantsCount' ? parseInt(value, 10) || 1 : value 
            }));
          };

          const toggleDate = (dateActual) => {
            setFormData(prev => {
              const isSelected = prev.selectedDates.includes(dateActual);
              if (isSelected) return { ...prev, selectedDates: prev.selectedDates.filter(d => d !== dateActual) };
              else return { ...prev, selectedDates: [...prev.selectedDates, dateActual] };
            });
          };

          const handleReset = () => {
            setIsSubmitted(false);
            setFormData({
              name: '', phone: '', address: '', 
              calendarType: 'è¾²æ›†', birthDate: '', birthTime: 'å‰æ™‚',
              selectedDates: [],
              sessionType: planOptions[0],
              participantsCount: 1,
              additionalInfo: ''
            });
            document.getElementById('register').scrollIntoView({ behavior: 'smooth' });
          };

          const handleSubmit = async (e) => {
            e.preventDefault();
            if (formData.selectedDates.length === 0) { alert("è«‹è‡³å°‘é¸æ“‡ä¸€å€‹æ³•æœƒæ—¥æœŸï¼"); return; }
            setIsSubmitting(true);
            
            // âš ï¸ è«‹åœ¨æ­¤è™•å¡«å…¥æ‚¨çš„ Google Web App URL
            const GOOGLE_SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbwVkfcWX_S2jjNnUmodEyH-0mzraRMFijaY-bfriRQf7OrGSR2KYtOZcxH7DRqK7K0h/exec'; 
            
            const calculatedTotal = 850 * parseInt(formData.participantsCount || 1, 10) * formData.selectedDates.length;

            // æº–å‚™å‚³é€çµ¦å¾Œå°çš„è³‡æ–™æ ¼å¼
            const payload = {
              ...formData,
              selectedDate: formData.selectedDates.join('ã€ '),
              additionalInfo: formData.additionalInfo ? formData.additionalInfo : 'ç„¡',
              totalPrice: calculatedTotal,
              formSource: 'å¤ªä¹™æ•‘è‹¦å¤©å°Šè§£æ¥­ç§‘å„€',
              ritualType: 'è§£æ¥­'
            };

            console.log("ã€è³‡æ–™é€å‡ºæª¢æŸ¥ã€‘", payload);

            try {
              const response = await fetch(GOOGLE_SCRIPT_URL, {
                method: 'POST',
                headers: { 'Content-Type': 'text/plain;charset=utf-8' },
                body: JSON.stringify(payload),
              });
              
              if (response.ok) {
                setIsSubmitted(true);
                document.getElementById('register').scrollIntoView({ behavior: 'smooth' });
              } else {
                alert("é€å‡ºå¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦æˆ–è¯ç¹«å®¢æœã€‚");
              }
            } catch (error) {
              console.error("æäº¤éŒ¯èª¤:", error);
              alert("ç¶²è·¯é€£ç·šç•°å¸¸ï¼Œè«‹ç¢ºèªç¶²è·¯ç‹€æ…‹å¾Œå†è©¦ã€‚");
            } finally {
              setIsSubmitting(false);
            }
          };

          const totalPrice = 850 * parseInt(formData.participantsCount || 1, 10) * formData.selectedDates.length;

          return (
            <div className="relative min-h-screen text-gray-300 font-sans selection:bg-dao-green selection:text-white overflow-hidden bg-dao-black">
              
              {/* èƒŒæ™¯å±¤ */}
              <div className="fixed inset-0 z-[-2] bg-dao-black"></div>
              <div className="fixed top-[-20%] left-[-10%] w-[60vw] h-[60vw] bg-dao-green/20 blur-[120px] rounded-full pointer-events-none"></div>
              <div className="fixed bottom-[-20%] right-[-10%] w-[60vw] h-[60vw] bg-dao-gold/10 blur-[120px] rounded-full pointer-events-none"></div>

              {/* 1. ä¸»è¦–è¦º Header */}
              <header className="relative py-28 px-4 sm:px-8 overflow-hidden min-h-[90vh] flex items-center justify-center border-b border-dao-green/30">
                <div className="absolute inset-0 z-0">
                    <img src="https://images.unsplash.com/photo-1517462180436-e63b65275e07?q=80&w=2000&auto=format&fit=crop" className="w-full h-full object-cover opacity-30" alt="ç¦ªæ„èƒŒæ™¯" />
                    <div className="absolute inset-0 bg-gradient-to-b from-dao-black/70 via-dao-black/50 to-dao-black"></div>
                </div>

                <div className="max-w-4xl mx-auto relative z-10 text-center space-y-8 mt-10">
                  <div className="inline-block px-6 py-2 rounded-full border border-dao-gold/50 bg-dao-black/50 backdrop-blur-md text-dao-gold font-bold tracking-[0.3em] text-sm mb-2 shadow-lg animate-pulse-slow">
                    å°‹è²æ•‘è‹¦ Â· æ…ˆæ‚²æ¿Ÿä¸–
                  </div>
                  <h1 className="text-5xl md:text-7xl font-bold serif-font leading-tight drop-shadow-[0_5px_5px_rgba(0,0,0,0.8)]">
                    <span className="gold-text block mb-2">å¤ªä¹™æ•‘è‹¦å¤©å°Š</span>
                    <span className="text-white text-3xl md:text-5xl font-light tracking-wide">è§£æ¥­æ¶ˆç½ç¥ˆç¦æ³•æœƒ</span>
                  </h1>
                  <p className="text-xl md:text-2xl text-gray-300 max-w-2xl mx-auto leading-relaxed font-light mt-6">
                    è‡³å¿ƒæ­¸å‘½ç¦®ï¼Œæ±æ¥µå¦™åš´å®®ã€‚<br/>
                    <span className="text-dao-jade font-medium">åŒ–è§£ç´¯ä¸–å†¤è¦ªï¼Œæ´—æ·¨ä»Šç”Ÿæ¥­éšœã€‚</span><br/>
                    ç¥ˆæ±‚èº«å¿ƒå®‰æ³°ï¼Œç¦æ…§é›™ä¿®ã€‚
                  </p>
                  
                  <div className="pt-8 flex flex-col sm:flex-row gap-4 justify-center items-center">
                    <a href="#register" className="inline-flex items-center gap-2 bg-gradient-to-r from-dao-green to-emerald-800 text-white font-bold text-xl px-10 py-5 rounded-sm shadow-[0_0_30px_rgba(16,185,129,0.3)] hover:shadow-[0_0_40px_rgba(16,185,129,0.5)] transition-all hover:-translate-y-1">
                      é ç´„å¤ªä¹™è§£æ¥­ <Icons.ArrowRight size={24} />
                    </a>
                    <a href="https://portaly.cc/bwa.bway2068" target="_blank" rel="noopener noreferrer" className="inline-flex items-center gap-2 border border-dao-gold text-dao-gold hover:bg-dao-gold/10 font-bold text-xl px-10 py-5 rounded-sm transition-all">
                      å ±åå…¶ä»–ç§‘å„€ <Icons.ScrollText size={24} />
                    </a>
                  </div>
                </div>
              </header>

              {/* 2. ä»‹ç´¹èˆ‡é©ç”¨å°è±¡ */}
              <section id="intro" className="py-20 px-4 max-w-5xl mx-auto">
                <div className="text-center mb-16">
                  <h2 className="text-3xl font-bold text-dao-gold serif-font mb-4 flex items-center justify-center gap-2">
                    <Icons.Lotus className="text-dao-jade" /> ç‚ºä½•éœ€è¦åšè§£æ¥­ï¼Ÿ
                  </h2>
                  <div className="h-1 w-24 bg-dao-green mx-auto rounded"></div>
                </div>
                
                <div className="grid md:grid-cols-2 gap-12 items-center">
                  <div className="space-y-6 text-lg leading-relaxed text-justify">
                    <p>
                        ã€Œæ¥­ã€æ˜¯æˆ‘å€‘éå»çš„è¡Œç‚ºæ‰€ç•™ä¸‹çš„å½±éŸ¿ã€‚ç•¶é‹å‹¢å—é˜»ã€èº«é«”è«åç—…ç—›ã€æˆ–äººéš›é—œä¿‚ä¸é †æ™‚ï¼Œå¾€å¾€æ˜¯ç´¯ä¸–æˆ–ä»Šç”Ÿçš„<strong className="text-white">ã€Œå†¤çµã€æœªè§£</strong>ã€‚
                    </p>
                    <div className="bg-dao-green/10 border-l-4 border-dao-gold p-6 rounded-r-lg relative">
                      <p className="text-gray-200 relative z-10 italic">
                        ã€Œè§£æ¥­ç§‘å„€ä¸¦éè¿·ä¿¡ï¼Œè€Œæ˜¯ä¸€å ´èŠåš´çš„æ‡ºæ‚”èˆ‡å’Œè§£å„€å¼ã€‚é€éå¤ªä¹™å¤©å°Šçš„æ…ˆæ‚²é¡˜åŠ›ï¼Œèª¿è§£é™°é™½å…©ç•Œçš„ç³¾è‘›ï¼Œå°‡å†¤è¦ªå‚µä¸»åŒ–ç‚ºå–„ç·£ã€‚ã€
                      </p>
                    </div>
                    <p>
                        å¤ªä¹™æ•‘è‹¦å¤©å°Šï¼Œä¹è‰²è“®èŠ±åº§ä¸‹ï¼Œä¹é ­ç…å­å¼è²éœ‡é–‹åœ°ç„ä¹‹é–€ã€‚ç¥‚ä¸åƒ…æ•‘åº¦äº¡é­‚ï¼Œæ›´èƒ½ç‚ºåœ¨ä¸–ä¹‹äºº<strong className="text-dao-jade">åŒ–è§£å†¤çµã€æ¶ˆé™¤æ¥­éšœã€æ²»ç™’èº«å¿ƒç–¾è‹¦</strong>ã€‚
                    </p>
                  </div>
                  
                  <div className="bg-dao-dark/80 backdrop-blur-md border border-dao-green/30 p-8 rounded-2xl shadow-2xl relative">
                    <h3 className="text-xl font-bold text-white mb-6 border-b border-dao-green/30 pb-4 serif-font">èª°éœ€è¦åƒåŠ è§£æ¥­æ³•æœƒï¼Ÿ</h3>
                    <ul className="space-y-5">
                      <li className="flex gap-4 items-start">
                        <div className="text-dao-gold shrink-0 mt-1"><Icons.CheckCircle size={20} /></div>
                        <div>
                          <strong className="text-dao-jade block mb-1">æµå¹´ä¸åˆ©è€…</strong>
                          <p className="text-sm text-gray-400">é‹å‹¢ä½è¿·ï¼Œåšä»€éº¼äº‹éƒ½å·®è‡¨é–€ä¸€è…³ï¼Œå¸¸é‡å°äººé˜»ç¤™ã€‚</p>
                        </div>
                      </li>
                      <li className="flex gap-4 items-start">
                        <div className="text-dao-gold shrink-0 mt-1"><Icons.CheckCircle size={20} /></div>
                        <div>
                          <strong className="text-dao-jade block mb-1">èº«é«”å¾®æ™è€…</strong>
                          <p className="text-sm text-gray-400">é›–ç„¡å¤§ç—…ä½†å°ç—…ä¸æ–·ï¼Œç²¾ç¥èé¡ï¼Œå¤œå¤¢ä¸å®‰ï¼Œç¡çœ å“è³ªå·®ã€‚</p>
                        </div>
                      </li>
                      <li className="flex gap-4 items-start">
                        <div className="text-dao-gold shrink-0 mt-1"><Icons.CheckCircle size={20} /></div>
                        <div>
                          <strong className="text-dao-jade block mb-1">å®¶åº­ä¸ç¦è€…</strong>
                          <p className="text-sm text-gray-400">å®¶å®…æ°£å ´ç´›äº‚ï¼Œçˆ­åµä¸æ–·ï¼Œå…­è¦ªç·£è–„ï¼Œæ¬²æ”¹å–„é—œä¿‚è€…ã€‚</p>
                        </div>
                      </li>
                      <li className="flex gap-4 items-start">
                        <div className="text-dao-gold shrink-0 mt-1"><Icons.CheckCircle size={20} /></div>
                        <div>
                          <strong className="text-dao-jade block mb-1">æ¬²è§£å†¤è¦ªè€…</strong>
                          <p className="text-sm text-gray-400">è‡ªè¦ºæœ‰è™§æ¬ å‰ä¸–ä»Šç”Ÿï¼Œæ¬²åšåŠŸå¾·è¿´å‘å†¤è¦ªå‚µä¸»ã€‚</p>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </section>
              
              {/* Promotional Images Section */}
              <section className="py-8 px-4 max-w-5xl mx-auto space-y-8">
                {/* 1200x450 Ad Banner */}
                <div className="relative w-full rounded-xl overflow-hidden shadow-[0_0_30px_rgba(6,78,59,0.3)] border border-dao-gold/30 group">
                  <img 
                    src="https://images.unsplash.com/photo-1598460616954-323869263156?q=80&w=2400&auto=format&fit=crop" 
                    alt="å¤ªä¹™æ•‘è‹¦å¤©å°Šå®£å‚³æ©«å¹…" 
                    className="w-full aspect-[1200/450] object-cover opacity-90 group-hover:opacity-100 transition-all duration-700 transform group-hover:scale-105"
                  />
                  <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                     <div className="bg-black/60 backdrop-blur-md border border-dao-gold/30 text-dao-gold px-6 py-3 rounded-full text-sm md:text-base font-bold tracking-wide">
                        åœ¨æ­¤è™•æ”¾ç½®æ´»å‹•æ–‡å®£ (å»ºè­°å°ºå¯¸ 1200x450)
                     </div>
                  </div>
                </div>

                {/* 1376x768 Detail Image */}
                <div className="relative w-full rounded-xl overflow-hidden shadow-[0_0_30px_rgba(6,78,59,0.3)] border border-dao-gold/30 group">
                  <img 
                    src="https://images.unsplash.com/photo-1515549832467-8783363e19b6?q=80&w=2400&auto=format&fit=crop" 
                    alt="è©³ç´°èªªæ˜åœ–" 
                    className="w-full aspect-[1376/768] object-cover opacity-90 group-hover:opacity-100 transition-all duration-700 transform group-hover:scale-105"
                  />
                   <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                     <div className="bg-black/60 backdrop-blur-md border border-dao-gold/30 text-dao-gold px-6 py-3 rounded-full text-sm md:text-base font-bold tracking-wide">
                        åœ¨æ­¤è™•æ”¾ç½®è©³ç´°èªªæ˜åœ– (å»ºè­°å°ºå¯¸ 1376x768)
                     </div>
                  </div>
                </div>
              </section>

              {/* 3. æ–¹æ¡ˆåƒ¹æ ¼ */}
              <section className="py-20 bg-dao-green/5 border-t border-dao-green/20 relative">
                <div className="max-w-4xl mx-auto px-4">
                  <div className="text-center mb-12">
                     <h2 className="text-3xl font-bold serif-font gold-text">ç§‘å„€çµç·£æ–¹æ¡ˆ</h2>
                  </div>

                  <div className="bg-gradient-to-br from-dao-dark to-black border border-dao-gold/30 p-8 sm:p-12 rounded-lg shadow-[0_0_50px_rgba(6,78,59,0.3)] flex flex-col md:flex-row items-center justify-between gap-8 relative overflow-hidden group hover:border-dao-gold transition-colors">
                    <div className="absolute top-0 right-0 w-64 h-64 bg-dao-jade/10 blur-[80px] rounded-full pointer-events-none"></div>

                    <div className="flex-1 space-y-4 text-center md:text-left relative z-10">
                      <h3 className="text-2xl font-bold text-white flex items-center justify-center md:justify-start gap-2 serif-font">
                        <Icons.Leaf className="text-dao-jade" size={24} /> å€‹äººè§£æ¥­æ¶ˆç½ç–æ–‡
                      </h3>
                      <p className="text-gray-400 text-sm md:text-base leading-relaxed">
                        åŒ…å«ï¼šæ³•å¸«è¦ªæ‰¹ç–æ–‡ã€å¤ªä¹™è§£å„ç¥å’’åŠ æŒã€<br/>
                        åŒ–è§£å†¤çµé‡‘ç´™ä¸€ä»½ã€ç¥ˆç¦å¹³å®‰ç±³ã€‚
                      </p>
                      <div className="inline-block bg-dao-green/20 text-dao-jade text-sm px-4 py-2 rounded border border-dao-green/50 mt-2">
                        ğŸŒ¿ çµç·£ç¦®ï¼šç™¾è§£ç¬¦ + è—¥ç‹é™¤éšœé¡˜é¦™ 10ml
                      </div>
                    </div>

                    <div className="text-center md:text-right shrink-0 relative z-10">
                      <div className="text-4xl font-black text-dao-gold mb-4 serif-font">NT$ 850</div>
                      <a href="#register" className="inline-block bg-dao-gold hover:bg-yellow-600 text-black font-bold px-10 py-3 rounded-sm transition-all transform hover:scale-105 shadow-lg">
                        ç«‹å³ç™»è¨˜
                      </a>
                    </div>
                  </div>
                </div>
              </section>

              {/* 4. æ—¥ç¨‹è¡¨ */}
              <section className="py-16 px-4 max-w-4xl mx-auto">
                <div className="text-center mb-10">
                  <h2 className="text-3xl font-bold text-dao-gold serif-font flex items-center justify-center gap-2 mb-4">
                    <Icons.CalendarDays /> 2026 è§£æ¥­ç§‘å„€æ—¥ç¨‹
                  </h2>
                  <p className="text-gray-500 text-sm">é€¢ã€ŒæˆŠæ—¥ã€æˆ–ã€Œå—æ­»æ—¥ã€ã€Œæœˆç ´æ—¥ã€ã€Œç´…ç ‚æ—¥ã€é †å»¶èˆ‰è¾¦ï¼Œä»¥ç¢ºä¿ç§‘å„€åœ“æ»¿ã€‚</p>
                </div>

                <div className="overflow-x-auto bg-dao-dark/80 backdrop-blur-md rounded-lg border border-dao-green/30 shadow-xl">
                  <table className="w-full text-left text-sm md:text-base">
                    <thead className="bg-dao-black/80 text-dao-gold border-b border-dao-green/30">
                      <tr>
                        <th className="p-4 font-bold text-center">æœˆä»½</th>
                        <th className="p-4 font-bold">åˆä¸€ ç§‘å„€æ—¥</th>
                        <th className="p-4 font-bold">åäº” ç§‘å„€æ—¥</th>
                      </tr>
                    </thead>
                    <tbody className="divide-y divide-dao-green/10">
                      {schedule.map((item, index) => (
                        <tr key={index} className="hover:bg-dao-green/5 transition-colors">
                          <td className="p-4 font-bold text-center text-dao-jade serif-font">{item.month}</td>
                          <td className="p-4">
                            {item.d1 ? (
                              item.d1.isDelayed ? (
                                <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2">
                                  <span className="line-through text-gray-600 text-xs">{item.d1.original}</span>
                                  <span className="text-white">{item.d1.actual}</span>
                                  <span className="text-[10px] bg-red-900/50 text-red-200 px-1.5 rounded border border-red-800">{item.d1.delayReason}é †å»¶</span>
                                </div>
                              ) : <span className="text-gray-300">{item.d1.actual}</span>
                            ) : <span className="text-gray-600 text-xs">æš«åœ</span>}
                          </td>
                          <td className="p-4">
                            {item.d15 ? (
                              item.d15.isDelayed ? (
                                <div className="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2">
                                  <span className="line-through text-gray-600 text-xs">{item.d15.original}</span>
                                  <span className="text-white">{item.d15.actual}</span>
                                  <span className="text-[10px] bg-red-900/50 text-red-200 px-1.5 rounded border border-red-800">{item.d15.delayReason}é †å»¶</span>
                                </div>
                              ) : <span className="text-gray-300">{item.d15.actual}</span>
                            ) : <span className="text-gray-600 text-xs">æš«åœ</span>}
                          </td>
                        </tr>
                      ))}
                    </tbody>
                  </table>
                </div>
              </section>

              {/* 5. ä¿¡çœ¾å›é¥‹ */}
              <section className="py-20 bg-dao-green/5 backdrop-blur-sm px-4">
                <div className="max-w-6xl mx-auto space-y-12">
                  <div className="text-center space-y-4">
                    <h2 className="text-3xl font-bold serif-font text-dao-gold mb-2">ä¿¡çœ¾æ„Ÿæ‡‰å›é¥‹</h2>
                    <p className="text-gray-400">å¿ƒèª å‰‡éˆï¼Œè§£é–‹çµï¼Œè·¯å°±é€šäº†ã€‚</p>
                  </div>

                  <div className="grid md:grid-cols-3 gap-6">
                    <div className="bg-dao-dark p-6 rounded-lg border border-dao-green/20 hover:border-dao-gold/50 transition-colors">
                      <p className="text-gray-300 text-sm leading-relaxed mb-6 italic">
                        ã€Œé€™å…©å¹´é‹å‹¢ä¸€ç›´å¾ˆå¡ï¼Œå·¥ä½œä¸é †ï¼Œèº«é«”ä¹Ÿç¸½æ˜¯é€™è£¡ç—›é‚£è£¡ç—›ã€‚åƒåŠ äº†è§£æ¥­ç§‘å„€å¾Œï¼Œæ„Ÿè¦ºè‚©è†€ä¸Šçš„é‡æ“”çªç„¶è¼•äº†å¾ˆå¤šï¼Œç¡çœ å“è³ªæ”¹å–„éå¸¸å¤šï¼ŒçœŸçš„å¾ˆç¥å¥‡ã€‚ã€
                      </p>
                      <div className="flex items-center gap-3 border-t border-dao-green/20 pt-4">
                        <div className="w-10 h-10 rounded-full bg-dao-green/30 flex items-center justify-center text-dao-jade font-bold">é™³</div>
                        <div><div className="text-white text-sm">é™³å°å§</div><div className="text-gray-500 text-xs">è¡Œæ”¿äººå“¡</div></div>
                      </div>
                    </div>
                    
                    <div className="bg-dao-dark p-6 rounded-lg border border-dao-green/20 hover:border-dao-gold/50 transition-colors">
                      <p className="text-gray-300 text-sm leading-relaxed mb-6 italic">
                        ã€Œä»¥å‰å®¶è£¡å¸¸å› ç‚ºå°äº‹åµæ¶ï¼Œæ°£æ°›å¾ˆåƒµã€‚å¹«å…¨å®¶äººå ±åè§£å†¤é‡‹çµå¾Œï¼Œæ„Ÿè¦ºå®¶è£¡çš„æˆ¾æ°£å°‘äº†å¾ˆå¤šï¼Œå¤§å®¶èªªè©±ä¹Ÿæ¯”è¼ƒå¿ƒå¹³æ°£å’Œäº†ï¼Œæ„Ÿè¬å¤©å°Šä¿ä½‘ã€‚ã€
                      </p>
                      <div className="flex items-center gap-3 border-t border-dao-green/20 pt-4">
                        <div className="w-10 h-10 rounded-full bg-dao-gold/20 flex items-center justify-center text-dao-gold font-bold">æ—</div>
                        <div><div className="text-white text-sm">æ—Oè¯</div><div className="text-gray-500 text-xs">è‡ªç‡Ÿå•†</div></div>
                      </div>
                    </div>

                    <div className="bg-dao-dark p-6 rounded-lg border border-dao-green/20 hover:border-dao-gold/50 transition-colors">
                      <p className="text-gray-300 text-sm leading-relaxed mb-6 italic">
                        ã€Œé›–ç„¶æ²’æœ‰å¤§ç—…ï¼Œä½†ç²¾ç¥ä¸€ç›´å¾ˆå·®ã€‚ç¬¬ä¸€æ¬¡åƒåŠ ç§‘å„€ï¼Œè½åˆ°æ³•å¸«èª¦ç¶“æ™‚å¿ä¸ä½ä¸€ç›´æµæ·šï¼Œæ³•æœƒçµæŸå¾Œå»è¦ºå¾—ç„¡æ¯”è¼•é¬†ï¼Œåƒæ˜¯æŠŠå¿ƒè£¡çš„åƒåœ¾éƒ½å€’ä¹¾æ·¨äº†ã€‚ã€
                      </p>
                      <div className="flex items-center gap-3 border-t border-dao-green/20 pt-4">
                        <div className="w-10 h-10 rounded-full bg-dao-jade/20 flex items-center justify-center text-dao-jade font-bold">å¼µ</div>
                        <div><div className="text-white text-sm">å¼µå§</div><div className="text-gray-500 text-xs">å®¶åº­ä¸»å©¦</div></div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>

              {/* 6. å ±åè¡¨å–® */}
              <section id="register" className="py-20 px-4 max-w-3xl mx-auto">
                <div className="bg-dao-dark border border-dao-gold/50 rounded-lg p-8 md:p-12 shadow-[0_0_40px_rgba(6,78,59,0.2)]">
                  
                  {isSubmitted ? (
                    // æ„Ÿè¬é é¢å…§å®¹
                    <div className="text-center py-10 space-y-6 animate-fade-in max-w-lg mx-auto">
                      <div className="mx-auto w-24 h-24 bg-dao-gold/10 rounded-full flex items-center justify-center text-dao-gold border border-dao-gold mb-6">
                        <Icons.Leaf size={48} />
                      </div>
                      <h2 className="text-3xl md:text-4xl font-bold text-white mb-2 serif-font">åŠŸå¾·åœ“æ»¿</h2>
                      <h3 className="text-xl md:text-2xl font-bold text-dao-gold mb-6">æ„Ÿè¬æ‚¨çš„å ±åï¼Œç–æ–‡å·²å—ç†</h3>
                      
                      <div className="bg-dao-green/10 border border-dao-green/30 p-6 rounded-lg text-left relative overflow-hidden mb-8">
                         <div className="space-y-4 font-mono text-lg">
                            <div className="flex justify-between border-b border-gray-700 pb-2">
                                <span className="text-gray-400 text-sm font-sans">éŠ€è¡Œä»£ç¢¼</span>
                                <span className="text-white">013 (åœ‹æ³°ä¸–è¯)</span>
                            </div>
                            <div className="flex justify-between border-b border-gray-700 pb-2">
                                <span className="text-gray-400 text-sm font-sans">åŒ¯æ¬¾å¸³è™Ÿ</span>
                                <span className="text-dao-gold text-2xl font-bold tracking-widest">059506013547</span>
                            </div>
                            <div className="flex justify-between pt-2">
                                <span className="text-gray-400 text-sm font-sans">çµç·£é‡‘é¡</span>
                                <span className="text-dao-gold text-2xl font-bold">NT$ {totalPrice.toLocaleString()}</span>
                            </div>
                         </div>
                      </div>
                      
                      <p className="text-gray-400 text-sm mb-6">
                        è«‹æ–¼å ±åå¾Œå®ŒæˆåŒ¯æ¬¾ï¼Œä¸¦åŠ å…¥å®˜æ–¹ LINE@ å‘ŠçŸ¥æœ«äº”ç¢¼ä»¥åˆ©æ ¸å°ã€‚
                      </p>

                      <div className="flex flex-col gap-4">
                        <button onClick={handleReset} className="w-full bg-transparent border border-dao-gold text-dao-gold hover:bg-dao-gold hover:text-black font-bold py-4 rounded transition-colors">
                            è¿”å›å ±åé 
                        </button>
                        <a href="https://portaly.cc/bwa.bway2068" target="_blank" rel="noopener noreferrer" className="w-full bg-dao-gold/10 border border-dao-gold text-dao-gold hover:bg-dao-gold hover:text-black font-bold py-4 rounded transition-colors flex items-center justify-center gap-2">
                            <Icons.ExternalLink size={20} />
                            å ±åå…¶ä»–ç§‘å„€
                        </a>
                      </div>
                    </div>
                  ) : (
                    // å¡«å¯«è¡¨å–®å…§å®¹
                    <>
                      <div className="text-center mb-10">
                        <h2 className="text-3xl font-bold serif-font gold-text mb-2">ç·šä¸Šå ±åç–æ–‡</h2>
                        <p className="text-gray-400 text-sm">è«‹è©³ç´°å¡«å¯«è³‡æ–™ï¼Œæ³•å¸«å°‡æ–¼æ³•æœƒç•¶æ—¥ç‚ºæ‚¨å‘ˆç–åŒ–å¯¶</p>
                      </div>

                      <form onSubmit={handleSubmit} className="space-y-6">
                        
                        {/* ä»½æ•¸é¸æ“‡ */}
                        <div className="bg-dao-green/5 p-6 rounded border border-dao-green/20">
                          <label className="block text-sm font-medium text-dao-gold mb-2 flex items-center gap-2">
                            <Icons.Users size={18} /> å ±åä»½æ•¸
                          </label>
                          <select name="participantsCount" value={formData.participantsCount} onChange={handleInputChange}
                            className="w-full bg-dao-black border border-dao-green rounded px-4 py-3 text-white focus:outline-none focus:border-dao-gold text-lg">
                            {[...Array(10)].map((_, i) => <option key={i+1} value={i+1}>{i+1} ä»½</option>)}
                          </select>
                          
                          {formData.participantsCount > 1 && (
                            <div className="mt-4 pt-4 border-t border-gray-700 space-y-3 animate-fade-in">
                              <label className="block text-sm font-medium text-dao-gold">å…¶ä»–ç¥ˆç¦è€…è³‡æ–™</label>
                              <p className="text-xs text-gray-400">è«‹å¡«å¯«æ‰€æœ‰åƒèˆ‡è€…çš„ï¼šå§“å / è«‹è¨»æ˜åœ‹æ›†(è¾²æ›†)ç”Ÿæ—¥ / åœ°å€</p>
                              <textarea name="additionalInfo" rows="4" value={formData.additionalInfo} onChange={handleInputChange}
                                className="w-full bg-dao-black border border-dao-green rounded px-4 py-3 text-white focus:outline-none focus:border-dao-gold resize-none"
                                placeholder="ä¾‹ï¼š&#10;1. ç‹å¤§æ˜ / 65å¹´8æœˆ15æ—¥ / å°åŒ—å¸‚...&#10;2. æå°ç¾ / 68å¹´2æœˆ2æ—¥ / å°åŒ—å¸‚..."></textarea>
                            </div>
                          )}
                        </div>

                        {/* åŸºæœ¬è³‡æ–™ */}
                        <div className="grid md:grid-cols-2 gap-6">
                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-1">ç¥ˆç¦äººå§“å *</label>
                            <input type="text" name="name" required value={formData.name} onChange={handleInputChange}
                              className="w-full bg-dao-black border border-dao-green rounded px-4 py-3 text-white focus:outline-none focus:border-dao-gold" placeholder="è«‹å¡«å¯«å§“å" />
                          </div>
                          <div>
                            <label className="block text-sm font-medium text-gray-300 mb-1">è¯çµ¡é›»è©± *</label>
                            <input type="tel" name="phone" required value={formData.phone} onChange={handleInputChange}
                              className="w-full bg-dao-black border border-dao-green rounded px-4 py-3 text-white focus:outline-none focus:border-dao-gold" placeholder="09xx-xxxxxx" />
                          </div>
                        </div>

                        <div>
                          <label className="block text-sm font-medium text-gray-300 mb-1">å±…ä½åœ°å€ (å‘ˆç–ç”¨) *</label>
                          <input type="text" name="address" required value={formData.address} onChange={handleInputChange}
                            className="w-full bg-dao-black border border-dao-green rounded px-4 py-3 text-white focus:outline-none focus:border-dao-gold" placeholder="è«‹å¡«å¯«ç›®å‰å±…ä½åœ°å€" />
                        </div>

                        {/* ç”Ÿæ—¥ */}
                        <div className="bg-dao-green/5 p-6 rounded border border-dao-green/20">
                          <label className="block text-sm font-medium text-dao-gold mb-2">å‡ºç”Ÿè³‡æ–™</label>
                          <div className="flex gap-4 mb-4">
                            <label className="flex items-center gap-2 cursor-pointer">
                              <input type="radio" name="calendarType" value="è¾²æ›†" checked={formData.calendarType === 'è¾²æ›†'} onChange={handleInputChange} className="accent-dao-gold" />
                              <span className="text-gray-300">è¾²æ›†</span>
                            </label>
                            <label className="flex items-center gap-2 cursor-pointer">
                              <input type="radio" name="calendarType" value="åœ‹æ›†" checked={formData.calendarType === 'åœ‹æ›†'} onChange={handleInputChange} className="accent-dao-gold" />
                              <span className="text-gray-300">åœ‹æ›† (è¥¿å…ƒ)</span>
                            </label>
                          </div>
                          <div className="grid grid-cols-2 gap-4">
                            <div>
                                <label className="block text-xs text-gray-400 mb-1">å‡ºç”Ÿæ—¥æœŸ</label>
                                <input type="date" name="birthDate" required value={formData.birthDate} onChange={handleInputChange}
                                  className="w-full bg-dao-black border border-dao-green rounded px-4 py-3 text-white focus:outline-none focus:border-dao-gold" />
                            </div>
                            <div>
                                <label className="block text-xs text-gray-400 mb-1">å‡ºç”Ÿæ™‚è¾°</label>
                                <select name="birthTime" value={formData.birthTime} onChange={handleInputChange}
                                  className="w-full bg-dao-black border border-dao-green rounded px-4 py-3 text-white focus:outline-none focus:border-dao-gold">
                                  <option value="å‰æ™‚">å‰æ™‚</option>
                                  <option value="å­æ™‚">å­æ™‚ (23-01)</option>
                                  <option value="ä¸‘æ™‚">ä¸‘æ™‚ (01-03)</option>
                                  <option value="å¯…æ™‚">å¯…æ™‚ (03-05)</option>
                                  <option value="å¯æ™‚">å¯æ™‚ (05-07)</option>
                                  <option value="è¾°æ™‚">è¾°æ™‚ (07-09)</option>
                                  <option value="å·³æ™‚">å·³æ™‚ (09-11)</option>
                                  <option value="åˆæ™‚">åˆæ™‚ (11-13)</option>
                                  <option value="æœªæ™‚">æœªæ™‚ (13-15)</option>
                                  <option value="ç”³æ™‚">ç”³æ™‚ (15-17)</option>
                                  <option value="é…‰æ™‚">é…‰æ™‚ (17-19)</option>
                                  <option value="æˆŒæ™‚">æˆŒæ™‚ (19-21)</option>
                                  <option value="äº¥æ™‚">äº¥æ™‚ (21-23)</option>
                                </select>
                            </div>
                          </div>
                        </div>

                        {/* æ—¥æœŸé¸æ“‡ */}
                        <div className="bg-dao-green/5 p-6 rounded border border-dao-green/20">
                           <label className="block text-sm font-medium text-dao-gold mb-1">é¸æ“‡æ³•æœƒæ—¥æœŸ (å¯è¤‡é¸) *</label>
                           <p className="text-xs text-gray-500 mb-3">â€» ç‚ºç¢ºä¿ç–æ–‡æ’°å¯«èˆ‡çµç·£å“æº–å‚™ï¼Œå„å ´æ¬¡å°‡æ–¼æ³•æœƒå‰ 5 å¤©æˆªæ­¢å ±åã€‚</p>
                           <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 max-h-60 overflow-y-auto custom-scrollbar pr-2">
                             {schedule.flatMap((item, idx) => {
                               const sessions = [];
                               // åƒ…ä¿ç•™ "åˆä¸€"ã€"åäº”"
                               if (item.d1) sessions.push({ type: 'åˆä¸€', dateInfo: item.d1, month: item.month, key: `d1-${idx}` });
                               if (item.d15) sessions.push({ type: 'åäº”', dateInfo: item.d15, month: item.month, key: `d15-${idx}` });
                               return sessions;
                             })
                             .filter(session => session.dateInfo.actual >= cutoffDateString)
                             .map(session => {
                               const isSelected = formData.selectedDates.includes(session.dateInfo.actual);
                               return (
                                 <label key={session.key} className={`flex items-center gap-3 p-3 rounded border cursor-pointer transition-all ${isSelected ? 'bg-dao-green/30 border-dao-gold' : 'bg-dao-black border-dao-green/30'}`}>
                                    <input type="checkbox" checked={isSelected} onChange={() => toggleDate(session.dateInfo.actual)} className="accent-dao-gold w-5 h-5" />
                                    <div>
                                        <span className={`block text-sm ${isSelected ? 'text-dao-gold font-bold' : 'text-gray-300'}`}>{session.month} {session.type}</span>
                                        <span className="text-xs text-gray-500">{session.dateInfo.actual}</span>
                                    </div>
                                 </label>
                               )
                             })}
                           </div>
                        </div>

                        {/* é€å‡ºæŒ‰éˆ• */}
                        <div className="pt-4">
                          <button type="submit" disabled={isSubmitting} className="w-full bg-gradient-to-r from-dao-green to-emerald-800 hover:from-emerald-700 hover:to-emerald-900 text-white font-bold text-xl py-4 rounded-sm shadow-lg transition-all transform hover:-translate-y-1 flex justify-center gap-2">
                            {isSubmitting ? 'å‚³é€ä¸­...' : `ç¢ºèªé€å‡ºç–æ–‡ (NT$ ${totalPrice.toLocaleString()})`}
                          </button>
                          <p className="text-center text-xs text-gray-500 mt-4">
                            å¤ªä¹™æ•‘è‹¦å¤©å°Š å°‹è²æ•‘è‹¦ è§£å†¤é‡‹çµ
                          </p>
                        </div>

                      </form>
                    </>
                  )}
                </div>
              </section>

              {/* Footer */}
              <footer className="bg-black py-8 text-center text-gray-500 text-sm border-t border-dao-green/20">
                <p className="serif-font text-lg text-dao-gold mb-2">é™å Â© 2026 ä¸™åˆå¹´ è§£æ¥­é™¤éšœç¥ˆç¦å°ˆæ¡ˆ</p>
              </footer>

            </div>
          );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
